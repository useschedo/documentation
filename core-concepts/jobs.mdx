---
title: 'Jobs'
description: 'Learn about job definitions and lifecycle'
---

Schedo.dev jobs are the core building blocks for scheduling and executing your tasks.

# Jobs

Jobs are the fundamental building blocks in Schedo.dev. A job represents a piece of code that needs to be executed at specific times or intervals.

## Job Structure

A job in Schedo.dev consists of three main components:

```typescript
schedo.defineJob(
  'unique-job-id',           // Identifier
  '*/15 * * * *',           // Schedule
  async (ctx) => {          // Handler
    // Job implementation
    return { status: 'done' };
  }
);
```

### Job Identifier

Every job requires a unique identifier. This ID is used to:
- Track job executions
- Monitor job status
- Configure job-specific settings
- Reference the job in the dashboard

```typescript
// Good identifiers are descriptive and unique
'daily-user-cleanup'
'hourly-metrics-aggregation'
'weekly-report-generation'
```

### Job Context

The job handler receives a context object (`ctx`) containing useful information and utilities:

```typescript
async (ctx) => {
  // Execution metadata
  console.log(ctx.executionId);    // Unique execution ID
  console.log(ctx.startedAt);      // Execution start time
  console.log(ctx.attempt);        // Current retry attempt

  // Job metadata
  console.log(ctx.jobId);          // Job identifier
  console.log(ctx.schedule);       // Job schedule

  // Utilities
  await ctx.log('Processing...');  // Structured logging
  await ctx.setMetadata({          // Update job metadata
    status: 'processing'
  });
}
```

### Job Return Values

Jobs can return data that will be stored and accessible in the dashboard:

```typescript
async (ctx) => {
  const result = await processData();
  
  return {
    processedItems: result.count,
    duration: result.duration,
    status: 'success'
  };
}
```

## Job Lifecycle

Jobs in Schedo.dev follow a specific lifecycle:

1. **Scheduled**: Job is waiting for its next execution time
2. **Running**: Job is currently executing
3. **Completed**: Job finished successfully
4. **Failed**: Job encountered an error
   - May retry depending on configuration
   - Moves to "Failed" state after all retries exhausted

```typescript
schedo.defineJob(
  'example-job',
  '0 * * * *',
  async (ctx) => {
    // 1. Job is scheduled (waiting for next hour)
    
    try {
      // 2. Job starts running
      await ctx.log('Starting job...');
      
      const result = await processData();
      
      // 3. Job completes successfully
      return { status: 'success', ...result };
    } catch (error) {
      // 4. Job fails and may retry
      throw error;
    }
  }
);
```

## Job Configuration

Jobs can be configured with various options:

```typescript
schedo.defineJob(
  'configurable-job',
  '0 0 * * *',
  async (ctx) => {
    // Job implementation
  },
  {
    // Retry configuration
    retries: 3,
    retryDelay: 60000, // 60 seconds

    // Timeout configuration
    timeout: 300000,   // 5 minutes

    // Concurrency configuration
    unique: true,      // Prevent concurrent executions

    // Metadata
    tags: ['production', 'cleanup'],
    description: 'Daily cleanup job'
  }
);
```

## Best Practices

1. **Idempotency**
   ```typescript
   // Good: Idempotent job
   async (ctx) => {
     const lastRun = await getLastProcessedTimestamp();
     const newRecords = await getRecordsSince(lastRun);
     await processRecords(newRecords);
   }
   ```

2. **Error Handling**
   ```typescript
   async (ctx) => {
     try {
       await riskyOperation();
     } catch (error) {
       await ctx.log('Operation failed', { error });
       throw error; // Let Schedo handle retries
     }
   }
   ```

3. **Progress Tracking**
   ```typescript
   async (ctx) => {
     const items = await getItems();
     
     for (const [index, item] of items.entries()) {
       await ctx.setMetadata({
         progress: (index / items.length) * 100
       });
       await processItem(item);
     }
   }
   ```

## Next Steps

<CardGroup cols={2}>
  <Card title="Scheduling" icon="calendar" href="/core-concepts/scheduling">
    Learn about scheduling options
  </Card>
  <Card title="Error Handling" icon="shield" href="/core-concepts/error-handling">
    Implement robust error handling
  </Card>
</CardGroup> 